<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste Final - BioField Intelligence</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #f5f5f5;
        }
        .test-container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .nav-test {
            display: flex;
            gap: 10px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        .nav-test a {
            padding: 10px 20px;
            background: #667eea;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            transition: background 0.3s;
        }
        .nav-test a:hover {
            background: #5a67d8;
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
        }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
        .warning { background: #fff3cd; color: #856404; }
        .info { background: #d1ecf1; color: #0c5460; }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ¯ Teste Final - BioField Intelligence</h1>
        
        <div class="status success">
            âœ… Servidor local funcionando em http://localhost:8000
        </div>
        
        <h2>ğŸ”— Links de NavegaÃ§Ã£o:</h2>
        <div class="nav-test">
            <a href="index.html">ğŸ  Login</a>
            <a href="dashboard-teste.html">ğŸ“Š Dashboard Teste</a>
            <a href="pages/dashboard.html">ğŸ“Š Dashboard Original</a>
            <a href="pages/evaluation.html">ğŸ“ AvaliaÃ§Ãµes</a>
            <a href="pages/reports.html">ğŸ“ˆ RelatÃ³rios</a>
            <a href="pages/organization.html">ğŸ¢ OrganizaÃ§Ã£o</a>
            <a href="pages/settings.html">âš™ï¸ ConfiguraÃ§Ãµes</a>
        </div>
        
        <h2>ğŸ§ª Teste de JavaScript:</h2>
        <button onclick="testNavigation()">Testar NavegaÃ§Ã£o</button>
        <button onclick="testAuth()">Testar AutenticaÃ§Ã£o</button>
        <button onclick="clearLog()">Limpar Log</button>
        
        <h2>ğŸ“‹ Log de Eventos:</h2>
        <div id="log" style="background: #f8f9fa; border: 1px solid #dee2e6; border-radius: 5px; padding: 15px; margin: 15px 0; font-family: monospace; font-size: 12px; max-height: 300px; overflow-y: auto;">
            <div>ğŸ” Aguardando testes...</div>
        </div>
        
        <h2>ğŸ“Š Status dos Arquivos:</h2>
        <div id="file-status">
            <p>Verificando arquivos...</p>
        </div>
    </div>

    <script>
        function log(message) {
            const logDiv = document.getElementById('log');
            const timestamp = new Date().toLocaleTimeString();
            logDiv.innerHTML += `<div>[${timestamp}] ${message}</div>`;
            logDiv.scrollTop = logDiv.scrollHeight;
        }
        
        function clearLog() {
            document.getElementById('log').innerHTML = '<div>ğŸ” Log limpo...</div>';
        }
        
        function testNavigation() {
            log('ğŸ§ª Testando navegaÃ§Ã£o...');
            
            const links = document.querySelectorAll('.nav-test a');
            log(`ğŸ“Š Links encontrados: ${links.length}`);
            
            links.forEach((link, index) => {
                log(`ğŸ”— Link ${index + 1}: ${link.href} - ${link.textContent}`);
                
                // Testar se o link funciona
                link.addEventListener('click', function(e) {
                    log(`ğŸ–±ï¸ Clique no link: ${this.href}`);
                    log(`ğŸ“ Texto: ${this.textContent}`);
                    log(`ğŸ¯ Target: ${e.target.tagName}`);
                    log(`ğŸ¯ Default prevented: ${e.defaultPrevented}`);
                    
                    // Verificar se Ã© um link interno
                    if (this.href.includes('pages/') || this.href.includes('index.html') || this.href.includes('dashboard-teste.html')) {
                        log('âœ… Link interno detectado - permitindo navegaÃ§Ã£o');
                        return true;
                    }
                });
            });
            
            log('âœ… Teste de navegaÃ§Ã£o concluÃ­do');
        }
        
        function testAuth() {
            log('ğŸ” Testando autenticaÃ§Ã£o...');
            
            // Verificar se hÃ¡ dados de autenticaÃ§Ã£o
            const isAuthenticated = localStorage.getItem('biofield_authenticated') === 'true';
            const user = localStorage.getItem('biofield_user');
            
            log(`ğŸ”‘ Autenticado: ${isAuthenticated}`);
            log(`ğŸ‘¤ UsuÃ¡rio: ${user ? JSON.parse(user).email : 'Nenhum'}`);
            
            if (isAuthenticated) {
                log('âœ… UsuÃ¡rio autenticado - pode acessar pÃ¡ginas protegidas');
            } else {
                log('âš ï¸ UsuÃ¡rio nÃ£o autenticado - serÃ¡ redirecionado para login');
            }
        }
        
        // Verificar status dos arquivos
        document.addEventListener('DOMContentLoaded', function() {
            log('ğŸš€ Teste final iniciado');
            
            const files = [
                'index.html',
                'dashboard-teste.html',
                'pages/dashboard.html',
                'pages/evaluation.html',
                'pages/reports.html',
                'pages/organization.html',
                'pages/settings.html'
            ];
            
            const statusDiv = document.getElementById('file-status');
            let statusHTML = '';
            
            files.forEach(file => {
                statusHTML += `<p>ğŸ“„ ${file}: <span id="status-${file.replace(/[^a-zA-Z0-9]/g, '')}">Verificando...</span></p>`;
            });
            
            statusDiv.innerHTML = statusHTML;
            
            // Testar cada arquivo
            files.forEach(file => {
                fetch(file)
                    .then(response => {
                        const statusId = `status-${file.replace(/[^a-zA-Z0-9]/g, '')}`;
                        const statusEl = document.getElementById(statusId);
                        if (response.ok) {
                            statusEl.innerHTML = 'âœ… DisponÃ­vel';
                            statusEl.style.color = 'green';
                            log(`âœ… ${file} - DisponÃ­vel`);
                        } else {
                            statusEl.innerHTML = 'âŒ Erro ' + response.status;
                            statusEl.style.color = 'red';
                            log(`âŒ ${file} - Erro ${response.status}`);
                        }
                    })
                    .catch(error => {
                        const statusId = `status-${file.replace(/[^a-zA-Z0-9]/g, '')}`;
                        const statusEl = document.getElementById(statusId);
                        statusEl.innerHTML = 'âŒ Erro: ' + error.message;
                        statusEl.style.color = 'red';
                        log(`âŒ ${file} - Erro: ${error.message}`);
                    });
            });
            
            // Testar autenticaÃ§Ã£o automaticamente
            setTimeout(() => {
                testAuth();
            }, 1000);
        });
        
        // Interceptar todos os cliques
        document.addEventListener('click', function(e) {
            if (e.target.tagName === 'A') {
                log(`ğŸ¯ Clique interceptado: ${e.target.href}`);
                log(`ğŸ¯ Target: ${e.target.tagName}`);
                log(`ğŸ¯ Default prevented: ${e.defaultPrevented}`);
            }
        });
    </script>
</body>
</html>
