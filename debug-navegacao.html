<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Navegação - BioField Intelligence</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #f5f5f5;
        }
        .debug-container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .nav-test {
            display: flex;
            gap: 10px;
            margin: 20px 0;
        }
        .nav-test a {
            padding: 10px 20px;
            background: #667eea;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            transition: background 0.3s;
        }
        .nav-test a:hover {
            background: #5a67d8;
        }
        .log {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            padding: 10px;
            margin: 10px 0;
            font-family: monospace;
            font-size: 12px;
            max-height: 200px;
            overflow-y: auto;
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
        }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
        .warning { background: #fff3cd; color: #856404; }
    </style>
</head>
<body>
    <div class="debug-container">
        <h1>🔍 Debug de Navegação - BioField Intelligence</h1>
        
        <div class="status success">
            ✅ Servidor local funcionando em http://localhost:8000
        </div>
        
        <h2>Teste de Links:</h2>
        <div class="nav-test">
            <a href="index.html" onclick="logClick(this)">🏠 Login</a>
            <a href="pages/dashboard.html" onclick="logClick(this)">📊 Dashboard</a>
            <a href="pages/evaluation.html" onclick="logClick(this)">📝 Avaliações</a>
            <a href="pages/reports.html" onclick="logClick(this)">📈 Relatórios</a>
            <a href="pages/organization.html" onclick="logClick(this)">🏢 Organização</a>
            <a href="pages/settings.html" onclick="logClick(this)">⚙️ Configurações</a>
        </div>
        
        <h2>Log de Eventos:</h2>
        <div id="log" class="log">
            <div>🔍 Aguardando cliques nos links...</div>
        </div>
        
        <h2>Teste de JavaScript:</h2>
        <button onclick="testJS()">Testar JavaScript</button>
        <button onclick="clearLog()">Limpar Log</button>
        <div id="js-status"></div>
        
        <h2>Informações do Navegador:</h2>
        <div id="browser-info"></div>
    </div>

    <script>
        function log(message) {
            const logDiv = document.getElementById('log');
            const timestamp = new Date().toLocaleTimeString();
            logDiv.innerHTML += `<div>[${timestamp}] ${message}</div>`;
            logDiv.scrollTop = logDiv.scrollHeight;
        }
        
        function logClick(link) {
            log(`🖱️ Link clicado: ${link.href}`);
            log(`📍 Texto do link: ${link.textContent}`);
            log(`🔗 Href: ${link.getAttribute('href')}`);
            
            // Verificar se o link tem preventDefault
            const hasPreventDefault = link.onclick && link.onclick.toString().includes('preventDefault');
            log(`⚠️ Tem preventDefault: ${hasPreventDefault}`);
            
            // Verificar se há event listeners
            const listeners = getEventListeners ? getEventListeners(link) : 'N/A';
            log(`🎧 Event listeners: ${JSON.stringify(listeners)}`);
        }
        
        function testJS() {
            const status = document.getElementById('js-status');
            try {
                log('🧪 Testando JavaScript...');
                
                // Testar se o JavaScript está funcionando
                status.innerHTML = '<div class="status success">✅ JavaScript funcionando corretamente</div>';
                log('✅ JavaScript funcionando');
                
                // Testar navegação programática
                log('🧪 Testando navegação programática...');
                const testUrl = 'pages/dashboard.html';
                log(`🔗 Tentando navegar para: ${testUrl}`);
                
                // Simular clique
                const testLink = document.createElement('a');
                testLink.href = testUrl;
                testLink.textContent = 'Teste';
                testLink.onclick = function(e) {
                    log('🖱️ Clique simulado detectado');
                    return true; // Permitir navegação
                };
                
                // Adicionar ao DOM temporariamente
                document.body.appendChild(testLink);
                testLink.click();
                document.body.removeChild(testLink);
                
                log('✅ Navegação programática testada');
                
            } catch (error) {
                status.innerHTML = `<div class="status error">❌ Erro no JavaScript: ${error.message}</div>`;
                log(`❌ Erro: ${error.message}`);
            }
        }
        
        function clearLog() {
            document.getElementById('log').innerHTML = '<div>🔍 Log limpo...</div>';
        }
        
        // Verificar informações do navegador
        document.addEventListener('DOMContentLoaded', function() {
            const browserInfo = document.getElementById('browser-info');
            browserInfo.innerHTML = `
                <p><strong>User Agent:</strong> ${navigator.userAgent}</p>
                <p><strong>URL Atual:</strong> ${window.location.href}</p>
                <p><strong>Protocolo:</strong> ${window.location.protocol}</p>
                <p><strong>Host:</strong> ${window.location.host}</p>
                <p><strong>Pathname:</strong> ${window.location.pathname}</p>
                <p><strong>JavaScript:</strong> ${typeof window !== 'undefined' ? 'Ativo' : 'Inativo'}</p>
            `;
            
            log('🚀 Debug de navegação iniciado');
            log(`🌐 URL atual: ${window.location.href}`);
            log(`🔧 User Agent: ${navigator.userAgent}`);
            
            // Verificar se há scripts carregados
            const scripts = document.querySelectorAll('script');
            log(`📜 Scripts carregados: ${scripts.length}`);
            
            // Verificar se há event listeners globais
            if (typeof window.addEventListener === 'function') {
                log('✅ addEventListener disponível');
            } else {
                log('❌ addEventListener não disponível');
            }
        });
        
        // Interceptar todos os cliques
        document.addEventListener('click', function(e) {
            if (e.target.tagName === 'A') {
                log(`🎯 Clique interceptado: ${e.target.href}`);
                log(`🎯 Target: ${e.target.tagName}`);
                log(`🎯 Default prevented: ${e.defaultPrevented}`);
            }
        });
    </script>
</body>
</html>
